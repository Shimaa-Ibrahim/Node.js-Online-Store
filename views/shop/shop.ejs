<%- include('../includes/head.ejs') %>
<link type="text/css" rel="stylesheet" href="/css/products.css" />
</head>

<body>
    <%- include('../includes/navigations.ejs') %>
    <div class="container">
        <% if (products.length > 0) { %>
        <% for (let product of products) { %>
        <div class="card">
            <a href="/prod/<%= product.id %>">
                <img src="<%= product.imageURL %>" alt="<%= product.title %>" width="100%" height="100%" />
            </a>
            <h2><a href="/prod/<%= product.id %>"><%= product.title %></a></h2>
            <p class="desc"><%= product.description %></p>
            <p class="price">$<%= product.price %></p>
            <p>
                <a id="cartbtn" href="<%= isAuthenticated ? `/add-to-cart/${ product.id }` : '/auth/login' %>">Add to
                    Cart</a>
            </p>
            <div class="my-2"></div>
        </div>
        <% } %>

        <%- include('../includes/pagination.ejs', {
                    currentPage: currentPage, 
                    nextPage: nextPage, 
                    previousPage: previousPage, 
                    lastPage: lastPage, 
                    hasNextPage: hasNextPage, 
                    hasPreviousPage: hasPreviousPage
                }) %>

        <% } else { %>
        <h2 style="text-align: center;">No Products Found!</h2>
        <% } %>
    </div>
</body>

</html>